%
% Copyright Â© 2021 by Timothy S. Jones
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Timothy S. Jones.
%
% This work consists of the file tikzlibrarydna.code.tex.
%
\ProvidesFile{tikzlibrarydna.code}[2021/06/15 v0.0.1 DNA diagrams using TikZ]

\pgfkeys{/dna/.cd,
  coding sequence length/.initial=6mm,
}

\tikzset{
  feature/.style={draw, transform shape},
  coding sequence/.style={
    feature,
    shape=single arrow,
    minimum height=6mm,
    single arrow head extend=1mm,
    anchor=west
  },
  ribosome binding site/.style={
    feature,
    shape=semicircle,
    anchor=south,
    yshift=-0.5\pgflinewidth,
    inner sep=1pt,
    fill=black
  },
  promoter/.style={
    feature,
    shape=promoter,
    promoter arrow={Triangle[length=3pt,width=3pt]},
    anchor=south west,
    yshift=\pgflinewidth,
    minimum height=2mm,
    minimum width=2mm,
    inner sep=0
  },
  terminator/.style={
    feature,
    shape=terminator,
    anchor=south,
    yshift=0.5\pgflinewidth,
    minimum height=2mm,
    minimum width=2mm,
    inner sep=0
  },
  line cap=rect,
}

\def\tikzdna@dnaplot{%
  \pgfutil@ifnextchar[{%
    \tikzdna@dnaplot@%
  }{%
    \tikzdna@dnaplot@[]%
  }%
}

\def\tikzdna@dnaplot@[#1]{%
}

\def\tikzdna@install@abbrev@commands{%
  \let\dnaplot=\tikzdna@dnaplot%
}

\def\tikzdna@environment@opt[#1]{%
  \begingroup%
  \tikzdna@install@abbrev@commands%
}
\def\endtikzdna@environment@opt{%
  \endgroup%
}

\def\tikzdna@environment@tikzdna{%
  \pgfutil@ifnextchar[{\tikzdna@@environment@tikzdna}{\tikzdna@@environment@tikzdna[]}%
}
\def\endtikzdna@environment@tikzdna{\endtikzdna@environment@opt}
\def\tikzdna@@environment@tikzdna[#1]{%
  \tikzdna@environment@opt[#1]%
}

\pgfutil@IfUndefined{tikzaddtikzonlycommandshortcutlet}{%
  \def\tikzaddtikzonlycommandshortcutlet#1#2{%
    \expandafter\def\expandafter\tikz@installcommands\expandafter{\tikz@installcommands%
      \let#1=#2%
    }%
  }%
}{}

\tikzaddtikzonlycommandshortcutlet\tikzdna\tikzdna@environment@tikzdna%
\tikzaddtikzonlycommandshortcutlet\endtikzdna\endtikzdna@environment@tikzdna%
